<html lang="en">
<head>
  <title>Secret Santa</title>
</head>
<body>
  <h1>Secret Santa</h1>
  <script>
    var queryString = window.location.search;
    if ( queryString == "" ) {
      document.body.innerHTML += "<h2>Add a participant!</h2>";
      document.body.innerHTML += '<form><input type="text" id="n1" name="n1"><input type="submit" value="Go"></form>'
    } else {
      queryString = queryString.substring(1);
      var nameList = queryString.split("&");
      var nameCount = nameList.length;
      var previousDataForm = "";

      document.body.innerHTML += ("<h2>Participants: " + nameCount + "</h2>");

      var i;
      var name;
      for (i = 0; i < nameCount; i++) {
        name = nameList[i].substring(3).split("+").join(" ");
        document.body.innerHTML += ("<p" + (i + 1) + ">" + name + "</p" + (i + 1) + "><br>");
        previousDataForm += ('<input type="hidden" name="n' + (i + 1) + '" value="'  + name + '">');
      }

      document.body.innerHTML += ('<form>' + previousDataForm + '<input type="text" id="n1" name="n' + (nameCount + 1) + '"><input type="submit" value="Go"></form>');
    }
  </script>
</body>
</html>
